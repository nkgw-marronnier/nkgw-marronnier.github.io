<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>適当作品その1「地球と月」</title>
<link rel="icon" href="nkgw-marronnier.ico">
<link rel="stylesheet" href="css/styles.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/99/three.min.js"></script>
</head>
<body>
<h1>適当に作ったモノ その1「地球と月」</h1>
<h3>CIT　情報科学部　情報ネットワーク学科　3年　学生番号：1832099</h3>
<h4>使用したテクスチャ素材</h4>
<a href="https://earthobservatory.nasa.gov/features/BlueMarble/BlueMarble_2002.php" target="_blank" rel="noopener">->地球のテクスチャ</a><br>
<a href="https://svs.gsfc.nasa.gov/4720" target="_blank" rel="noopener">->月のテクスチャ(NASA's Scientific Visualization Studio)</a>
<h4>提出課題の説明など</h4>
<details>
<summary>説明を読む</summary>
中心(0,0,0）に地球のテクスチャを適用した球をy軸中心に回転させる。月は月のテクスチャを適用させた後にグループ化し、配置座標x,y,zをradian=Math.PI*2として(2.5*Math.cos(radian),0,2.5*Math.sin(radian))と設定。さらに光源を一つの平行光源に設定し、光の強さを2.5に設定。カメラにこれらの運動が収まるように座標を(0,0,6)に設定。これらのプログラムで、地球と月の衛星運動を模したものができた。<br>
</details><br>
<details>
<summary>この課題のプログラム</summary>
<a href="https://github.com/nkgw-marronnier/WebGL-Three.js-/blob/master/tekitou1.html" target="blank" rel="noopener">->GitHub(nkgw-marronnier) [公開期間:2020/07/20~2020/07/30]</a><br>
</details>
<br>
<script>
var init = function() {
	var width = 960,
    height = 540;

	// レンダラーを作成
	var renderer = new THREE.WebGLRenderer();
	renderer.setSize(width, height);
	document.body.appendChild(renderer.domElement);

	// シーンを作成
	var scene = new THREE.Scene();

	// カメラを作成
	var camera = new THREE.PerspectiveCamera(45, width / height, 1, 1000);
	camera.position.set(0,0,6);

	// テクスチャー読み込み
	var textureLoader = new THREE.TextureLoader();
	var texture_earth = textureLoader.load("texture/earth.jpg");
	var mat_earth = new THREE.MeshLambertMaterial();
	mat_earth.map = texture_earth;
	var texture_moon = textureLoader.load("texture/moon.jpg");
	var mat_moon = new THREE.MeshLambertMaterial();
	mat_moon.map = texture_moon;

	//グループを作る
	var moon_group = new THREE.Group();
	//3D空間にグループを追加する
	scene.add(moon_group);

	// 地球を作成
	var earthgeometry = new THREE.SphereGeometry(0.5, 32, 32);
	var earth = new THREE.Mesh(earthgeometry, mat_earth);
	earth.position.z = 0;
	scene.add(earth);
	earth.scale.set(1.5,1.5,1.5);

  	//月を作成
	var moongeometry = new THREE.SphereGeometry(0.5, 32, 32);
	var moon = new THREE.Mesh(moongeometry, mat_moon);
	var radian = (Math.PI)*2;
	moon.position.set(-2.5* Math.cos(radian),0,-2.5*Math.sin(radian));
	moon_group.add(moon);
	moon.scale.set(0.6,0.6,0.6);

  	//太陽の光
	var directionalLight = new THREE.DirectionalLight(0xffffff,2.5);
	directionalLight.position.set(-10, 1, 1);
	// シーンに追加
	scene.add(directionalLight);

	//星空1(白色)を作成
	var stargeometry = new THREE.Geometry();
	// 配置する範囲
	var SIZE = 1000;
	// 配置する個数
	var LENGTH = 5000;
	for (let i = 0; i < LENGTH; i++) {
	stargeometry.vertices.push(new THREE.Vector3(
		SIZE * (Math.random() - 0.5),
		SIZE * (Math.random() - 0.5),
		SIZE * (Math.random() - 0.5),));
	}
	var starmaterial = new THREE.PointsMaterial({
	size: 0.6,color: 0xF0FFFF,});
	var starmesh = new THREE.Points(stargeometry, starmaterial);
	scene.add(starmesh)

	//星空2(青色)を作成
	var stargeometry2 = new THREE.Geometry();
	// 配置する範囲
	var SIZE = 1000;
	// 配置する個数
	var LENGTH = 1000;
	for (let i = 0; i < LENGTH; i++) {
	stargeometry2.vertices.push(new THREE.Vector3(
		SIZE * (Math.random() - 0.5),
		SIZE * (Math.random() - 0.5),
		SIZE * (Math.random() - 0.5),));
	}
	var starmaterial2 = new THREE.PointsMaterial({
	size: 0.6,color: 0x00FFFF,});
	var starmesh2 = new THREE.Points(stargeometry2, starmaterial2);
	scene.add(starmesh2)

	//星空3(燈色)を作成
	var stargeometry3 = new THREE.Geometry();
	// 配置する範囲
	var SIZE = 1000;
	// 配置する個数
	var LENGTH = 1000;
	for (let i = 0; i < LENGTH; i++) {
	stargeometry3.vertices.push(new THREE.Vector3(
		SIZE * (Math.random() - 0.5),
		SIZE * (Math.random() - 0.5),
		SIZE * (Math.random() - 0.5),));
	}
	var starmaterial3 = new THREE.PointsMaterial({
	size: 0.6,color: 0xFF8C00,});
	var starmesh3 = new THREE.Points(stargeometry3, starmaterial3);
	scene.add(starmesh3)

	//星空4(紫色)を作成
	var stargeometry4 = new THREE.Geometry();
	// 配置する範囲
	var SIZE = 1000;
	// 配置する個数
	var LENGTH = 1000;
	for (let i = 0; i < LENGTH; i++) {
	stargeometry4.vertices.push(new THREE.Vector3(
		SIZE * (Math.random() - 0.5),
		SIZE * (Math.random() - 0.5),
		SIZE * (Math.random() - 0.5),));
	}
	var starmaterial4 = new THREE.PointsMaterial({
	size: 0.6,color: 0xFF00FF,});
	var starmesh4 = new THREE.Points(stargeometry4, starmaterial4);
	scene.add(starmesh4)

	// 初回実行
	var update = function() {
		requestAnimationFrame(update);

	  	// 星を回転させる
		earth.rotation.y += 0.005;
		moon_group.rotation.y += 0.0055;

		//星空を回転させる
		starmesh.rotation.y += 0.0001;
		starmesh.rotation.x += 0.0001;
		starmesh2.rotation.y += 0.0001;
		starmesh2.rotation.x += 0.0001;
		starmesh3.rotation.y += 0.0001;
		starmesh3.rotation.x += 0.0001;
		starmesh4.rotation.y += 0.0001;
		starmesh4.rotation.x += 0.0001;

		renderer.render(scene, camera);
	};
	update();
}
window.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>